##################
Upgrade procedures
##################

From X.Y to Y.X
===============

Specific instructions.

From N.M to N.P
===============

Nothing specific. Follow the general procedure described at the end of this
document

General procedure
=================

This procedure is a general-purpose one. You may use it if only no specific 
procedure is provided for your version.

* Put the website under maintenance mode:

  .. code-block:: bash
  
    drush vset site_offline 1

* If you are using a load balancer, keep only one server up, stop the others.
* Backup at least:

  * webmedia (sites/default/files)
  * settings (sites/default/settings.php)
  * database

* Update the files (rsync is appropriate)
* Run the following commands:

  .. code-block:: bash
  
    drush updb
    drush fra
    drush cc all

* If you are using a load balancer:

  * synchronize server nodes.
  * clear Drupal's cache on each node with the "drush cc all" command: it is
    required to clear CSS and JS caches.
  * restart every server.
  
* Release maintenance mode:
  
  .. code-block:: bash
  
    drush vset site_offline 0
